"use strict";(self.webpackChunkbooks_reading_tracker=self.webpackChunkbooks_reading_tracker||[]).push([[259],{8259:function(e,n,t){t.r(n),t.d(n,{default:function(){return ee}});var s,l,i,a,r,o,c,d,u,h=t(9439),f=t(168),x=t(225),j=x.Z.div(s||(s=(0,f.Z)([""]))),g=t(2791),p=t(7892),b=t.n(p),Z=x.Z.div(l||(l=(0,f.Z)([""]))),m=x.Z.div(i||(i=(0,f.Z)([""]))),v=t(9836),k=t(3382),C=t(3994),y=t(9281),S=t(6890),T=t(5855),N=t(5527),Y=t(3153),A=t(3384),D=t(184),B=function(){var e=(0,Y.C)(A.UN);return(0,D.jsx)(m,{children:(0,D.jsx)(y.Z,{component:N.Z,children:(0,D.jsxs)(v.Z,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,D.jsx)(S.Z,{children:(0,D.jsxs)(T.Z,{children:[(0,D.jsx)(C.Z,{align:"left",children:"Book title"}),(0,D.jsx)(C.Z,{align:"left",children:"Author"}),(0,D.jsx)(C.Z,{align:"left",children:"Year"}),(0,D.jsx)(C.Z,{align:"left",children:"Pages"})]})}),(0,D.jsx)(k.Z,{children:e.map((function(e){return(0,D.jsxs)(T.Z,{sx:{"&:last-of-type td, &:last-of-type th":{border:0}},children:[(0,D.jsxs)(C.Z,{align:"left",children:[e.pagesTotal===e.pagesFinished?"true":"false","' '",e.title]}),(0,D.jsx)(C.Z,{align:"left",children:e.author}),(0,D.jsx)(C.Z,{align:"left",children:e.publishYear}),(0,D.jsx)(C.Z,{align:"left",children:e.pagesTotal})]},e._id)}))})]})})})},L=x.Z.div(a||(a=(0,f.Z)([""]))),w=function(){var e=(0,Y.C)(A.Nh),n=(0,Y.C)(A.v3);return(0,D.jsx)(L,{children:(0,D.jsx)("h2",{children:b()(n).diff(e,"day")})})},E=function(){return(0,D.jsxs)(Z,{children:[(0,D.jsx)(w,{}),(0,D.jsx)(B,{})]})},F=x.Z.div(r||(r=(0,f.Z)([""]))),O=t(1474),_=function(e){var n=e.trainingBookList,t=e.planningStartDate,s=e.planningEndDate,l=(0,Y.C)(A.SL);console.log(n);var i=(0,Y.C)(A.Nh),a=(0,Y.C)(A.v3),r=(0,Y.C)(A.nL);return r&&(console.log("BOOKS COUNTER"),console.log((0,O.ss)(l.books))),(0,D.jsxs)(F,{children:[(0,D.jsx)("h2",{children:"My goals"}),(0,D.jsxs)("ul",{className:"goals-body",children:[(0,D.jsxs)("li",{className:"goal",children:[(0,D.jsx)("p",{children:r?l.books.length:n.length}),(0,D.jsx)("p",{children:"Amount of books"})]}),(0,D.jsxs)("li",{className:"goal",children:[(0,D.jsx)("p",{children:r?b()(a).diff(b()(i),"day"):b()(s).diff(t,"day")||0}),(0,D.jsx)("p",{children:"Amount of days"})]}),r&&(0,D.jsxs)("li",{className:"goal",children:[(0,D.jsx)("p",{children:l.books.length-(0,O.ss)(l.books)+1}),(0,D.jsx)("p",{children:"Books left"})]})]})]})},P=t(3433),U=x.Z.div(o||(o=(0,f.Z)([""]))),M=t(3281),q=t(1652),R=t(4750),H=t(4449),V=t(5984),W=t(4653),$=t(5705),z=t(6727),K=function(){var e=(0,Y.C)(A.SL),n=(0,Y.C)(A.o3),t=(0,Y.C)(A.$3),s=(0,Y.T)(),l=(0,g.useState)(0),i=(0,h.Z)(l,2),a=i[0],r=i[1],o=(0,O.pd)(e.books);(0,g.useEffect)((function(){"fulfilled"===n&&(o?r(o.pagesTotal-o.pagesFinished):(r(0),s((0,A.lF)("success"))))}),[o,n]);var c=z.Ry({pages:z.Rx().min(1,"Please enter a valid value").max(a,"You have only ".concat(a," pages left in this book")).required("This field is required")}),d=(0,$.TA)({initialValues:{pages:0},validationSchema:c,onSubmit:function(e){console.log(e),s((0,W.UU)(e)),d.resetForm()}}),u=function(e){var n=(0,P.Z)(Object.values(e));return n.length<=5?n:n.filter((function(e,n,t){return n+1>t.length-5}))}(t);return(0,D.jsxs)(U,{children:[(0,D.jsxs)("form",{onSubmit:d.handleSubmit,children:[(0,D.jsx)(q._,{dateAdapter:R.y,children:(0,D.jsx)(M.M,{label:"Date",defaultValue:b()(),disabled:!0})}),(0,D.jsx)(H.Z,{id:"outlined-basic",label:"Amount of pages",variant:"outlined",type:"number",name:"pages",value:d.values.pages,onChange:d.handleChange,helperText:d.touched.pages&&d.errors.pages}),(0,D.jsx)("button",{type:"submit",children:"Add result"})]}),(0,D.jsxs)("div",{className:"results-container",children:[(0,D.jsx)("h3",{children:"Statistics"}),"fulfilled"===n?u.map((function(e){return(0,D.jsxs)("li",{children:[(0,D.jsx)("p",{children:e.time}),(0,D.jsx)("p",{children:e.pagesCount})]},(0,V.x0)())})):null]})]})},G=(x.Z.form(c||(c=(0,f.Z)([""]))),x.Z.div(d||(d=(0,f.Z)([""]))),t(4452),x.Z.div(u||(u=(0,f.Z)([""])))),I=t(4164),J=t(7689),Q=document.querySelector("#modal-root"),X=function(e){var n=e.modalType,t=e.modalCloseHandler,s=(0,J.s0)(),l=(0,Y.T)();switch(n){case"success":return(0,I.createPortal)((0,D.jsxs)(G,{children:[(0,D.jsx)("p",{children:"Congratulations! You made it in time!"}),(0,D.jsx)("button",{type:"button",onClick:function(){t(),l((0,A.rF)())},children:"New training"}),(0,D.jsx)("button",{type:"button",onClick:function(){t(),s("/")},children:"Back"})]}),Q);case"fail":return(0,I.createPortal)((0,D.jsxs)(G,{children:[(0,D.jsx)("p",{children:"Well done! but you need to be a little bit faster. You can do it)"}),(0,D.jsx)("button",{type:"button",onClick:function(){t(),l((0,A.rF)())},children:"New training"}),(0,D.jsx)("button",{type:"button",onClick:function(){t(),s("/")},children:"Back"})]}),Q);case"book read":return(0,I.createPortal)((0,D.jsxs)(G,{children:[(0,D.jsx)("p",{children:"Congratulations! Another book read."}),(0,D.jsx)("button",{type:"button",onClick:function(){t()},children:"Done"})]}),Q)}},ee=function(){var e=(0,Y.C)(A.$3),n=(0,Y.C)(A.o3),t=(0,Y.C)(A.nL),s=(0,Y.C)(A.Yz),l=(0,Y.C)(A.UN),i=(0,g.useState)([]),a=(0,h.Z)(i,2),r=a[0],o=(a[1],(0,g.useState)(b()().format("YYYY-MM-DD"))),c=(0,h.Z)(o,2),d=c[0],u=(c[1],(0,g.useState)("")),f=(0,h.Z)(u,2),x=f[0],p=(f[1],(0,g.useState)(!1)),Z=(0,h.Z)(p,2),m=Z[0],v=Z[1],k=(0,g.useState)(""),C=(0,h.Z)(k,2),y=C[0],S=C[1];(0,g.useEffect)((function(){switch(s){case"none":case"active":break;case"success":S("success"),v(!0);break;case"fail":S("fail"),v(!0)}}),[s]),(0,g.useEffect)((function(){if("active"===s){var e=(0,O.ss)(l);if(!e||1===e)return;S("book read"),v(!0)}}),[l]);return console.log("STATS!"),"fulfilled"===n&&console.log(Object.values((0,O.Ln)(Object.values(e))).map((function(e,n,t){return(338-(0,O.dD)(t,n))/(10-n)}))),(0,D.jsxs)(j,{children:[(0,D.jsx)(E,{}),(0,D.jsx)(_,{trainingBookList:r,planningStartDate:d,planningEndDate:x}),t&&(0,D.jsx)(K,{}),m&&(0,D.jsx)(X,{modalType:y,modalCloseHandler:function(){v(!1)}})]})}}}]);
//# sourceMappingURL=259.cfe3f13d.chunk.js.map