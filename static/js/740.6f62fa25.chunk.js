"use strict";(self.webpackChunkbooks_reading_tracker=self.webpackChunkbooks_reading_tracker||[]).push([[740],{6740:function(n,e,t){t.r(e),t.d(e,{default:function(){return gn}});var i,a,r,s,l,o,d,c,u,h,f,x=t(9439),p=t(168),b=t(225),g=b.Z.div(i||(i=(0,p.Z)([""]))),j=t(2791),m=t(7892),Z=t.n(m),v=b.Z.div(a||(a=(0,p.Z)([""]))),k=b.Z.div(r||(r=(0,p.Z)([""]))),y=t(9836),C=t(3382),S=t(3994),w=t(9281),D=t(6890),Y=t(5855),L=t(5527),N=t(3153),T=t(3384),_=t(184),E=function(){var n=(0,N.C)(T.UN);return(0,_.jsx)(k,{children:(0,_.jsx)(w.Z,{component:L.Z,children:(0,_.jsxs)(y.Z,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,_.jsx)(D.Z,{children:(0,_.jsxs)(Y.Z,{children:[(0,_.jsx)(S.Z,{align:"left",children:"Book title"}),(0,_.jsx)(S.Z,{align:"left",children:"Author"}),(0,_.jsx)(S.Z,{align:"left",children:"Year"}),(0,_.jsx)(S.Z,{align:"left",children:"Pages"})]})}),(0,_.jsx)(C.Z,{children:n.map((function(n){return(0,_.jsxs)(Y.Z,{sx:{"&:last-of-type td, &:last-of-type th":{border:0}},children:[(0,_.jsxs)(S.Z,{align:"left",children:[n.pagesTotal===n.pagesFinished?"true":"false","' '",n.title]}),(0,_.jsx)(S.Z,{align:"left",children:n.author}),(0,_.jsx)(S.Z,{align:"left",children:n.publishYear}),(0,_.jsx)(S.Z,{align:"left",children:n.pagesTotal})]},n._id)}))})]})})})},F=b.Z.div(s||(s=(0,p.Z)([""]))),M=t(1474),O=function(){var n=(0,N.T)(),e=(0,N.C)(T.v3),t=(0,j.useState)(Z()(e).diff(Z()())),i=(0,x.Z)(t,2),a=i[0],r=i[1];return(0,j.useEffect)((function(){var t=setInterval((function(){Z()(e).diff(Z()())>=0?r(Z()(e).diff(Z()())):(r(0),n((0,T.lF)("fail")),clearInterval(t))}),1e3);return function(){clearInterval(t)}}),[]),(0,_.jsx)(F,{children:(0,_.jsxs)("dl",{children:[(0,_.jsxs)("div",{children:[(0,_.jsx)("dt",{children:(0,M.lN)(a).d.toString().padStart(2,"0")}),(0,_.jsx)("dd",{children:"Days"})]}),(0,_.jsxs)("div",{children:[(0,_.jsx)("dt",{children:(0,M.lN)(a).h.toString().padStart(2,"0")}),(0,_.jsx)("dd",{children:"Hrs"})]}),(0,_.jsxs)("div",{children:[(0,_.jsx)("dt",{children:(0,M.lN)(a).m.toString().padStart(2,"0")}),(0,_.jsx)("dd",{children:"Minutes"})]}),(0,_.jsxs)("div",{children:[(0,_.jsx)("dt",{children:(0,M.lN)(a).s.toString().padStart(2,"0")}),(0,_.jsx)("dd",{children:"Seconds"})]})]})})},A=function(){return(0,_.jsxs)(v,{children:[(0,_.jsx)(O,{}),(0,_.jsx)(E,{})]})},B=b.Z.div(l||(l=(0,p.Z)([""]))),H=function(n){var e=n.trainingBookList,t=n.planningStartDate,i=n.planningEndDate,a=(0,N.C)(T.SL),r=(0,N.C)(T.Nh),s=(0,N.C)(T.v3),l=(0,N.C)(T.nL);return(0,_.jsxs)(B,{children:[(0,_.jsx)("h2",{children:"My goals"}),(0,_.jsxs)("ul",{className:"goals-body",children:[(0,_.jsxs)("li",{className:"goal",children:[(0,_.jsx)("p",{children:l?a.books.length:e.length}),(0,_.jsx)("p",{children:"Amount of books"})]}),(0,_.jsxs)("li",{className:"goal",children:[(0,_.jsx)("p",{children:l?Z()(s).diff(Z()(r),"day"):Z()(i).diff(t,"day")||0}),(0,_.jsx)("p",{children:"Amount of days"})]}),l&&(0,_.jsxs)("li",{className:"goal",children:[(0,_.jsx)("p",{children:a.books.length-(0,M.ss)(a.books)+1}),(0,_.jsx)("p",{children:"Books left"})]})]})]})},P=t(3433),V=b.Z.div(o||(o=(0,p.Z)([""]))),I=t(5854),R=t(1652),q=t(4750),z=t(5853),U=t(5984),W=t(4653),$=t(5705),J=t(6727),G=function(){var n=(0,N.C)(T.SL),e=(0,N.C)(T.o3),t=(0,N.C)(T.$3),i=(0,N.T)(),a=(0,j.useState)(0),r=(0,x.Z)(a,2),s=r[0],l=r[1],o=(0,M.pd)(n.books);(0,j.useEffect)((function(){"fulfilled"===e&&(o?l(o.pagesTotal-o.pagesFinished):(l(0),i((0,T.lF)("success"))))}),[o,e]);var d=J.Ry({pages:J.Rx().min(1,"Please enter a valid value").max(s,"You have only ".concat(s," pages left in this book")).required("This field is required")}),c=(0,$.TA)({initialValues:{pages:0},validationSchema:d,onSubmit:function(n){i((0,W.UU)(n)),c.resetForm()}}),u=function(n){var e=(0,P.Z)(Object.values(n));return e.length<=5?e:e.filter((function(n,e,t){return e+1>t.length-5}))}(t);return(0,_.jsxs)(V,{children:[(0,_.jsxs)("form",{onSubmit:c.handleSubmit,children:[(0,_.jsx)(R._,{dateAdapter:q.y,children:(0,_.jsx)(I.M,{label:"Date",defaultValue:Z()(),disabled:!0})}),(0,_.jsx)(z.Z,{id:"outlined-basic",label:"Amount of pages",variant:"outlined",type:"number",name:"pages",value:c.values.pages,onChange:c.handleChange,helperText:c.touched.pages&&c.errors.pages}),(0,_.jsx)("button",{type:"submit",children:"Add result"})]}),(0,_.jsxs)("div",{className:"results-container",children:[(0,_.jsx)("h3",{children:"Statistics"}),"fulfilled"===e?u.map((function(n){return(0,_.jsxs)("li",{children:[(0,_.jsx)("p",{children:n.time}),(0,_.jsx)("p",{children:n.pagesCount})]},(0,U.x0)())})):null]})]})},K=t(1413),Q=b.Z.form(d||(d=(0,p.Z)([""]))),X=b.Z.div(c||(c=(0,p.Z)([""]))),nn=function(n){var e=n.trainingList,t=n.removeFromTrainingListHandler;return(0,_.jsx)(X,{children:(0,_.jsx)(w.Z,{component:L.Z,children:(0,_.jsxs)(y.Z,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,_.jsx)(D.Z,{children:(0,_.jsxs)(Y.Z,{children:[(0,_.jsx)(S.Z,{align:"left",children:"Book title"}),(0,_.jsx)(S.Z,{align:"left",children:"Author"}),(0,_.jsx)(S.Z,{align:"left",children:"Year"}),(0,_.jsx)(S.Z,{align:"left",children:"Pages"})]})}),(0,_.jsx)(C.Z,{children:e.map((function(n){return(0,_.jsxs)(Y.Z,{sx:{"&:last-of-type td, &:last-of-type th":{border:0}},children:[(0,_.jsx)(S.Z,{align:"left",children:n.title}),(0,_.jsx)(S.Z,{align:"left",children:n.author}),(0,_.jsx)(S.Z,{align:"left",children:n.publishYear}),(0,_.jsx)(S.Z,{align:"left",children:n.pagesTotal}),(0,_.jsx)(S.Z,{align:"left",children:(0,_.jsx)("button",{type:"button",onClick:function(){t(n._id)},children:"D"})})]},n._id)}))})]})})})},en=t(5770),tn=t(4452),an=function(n){var e=n.trainingBookList,t=n.startDate,i=n.endDate,a=n.updateTrainingBookList,r=n.updateStartDate,s=n.updateEndDate,l=n.updateIsFormSubmitted,o=(0,N.T)(),d=(0,j.useState)(null),c=(0,x.Z)(d,2),u=c[0],h=c[1],f=(0,N.C)(tn.r9),p=(0,N.C)(tn.k3),b=[].concat((0,P.Z)(f.map((function(n){return(0,K.Z)((0,K.Z)({},n),{},{label:n.title})}))),(0,P.Z)(p.map((function(n){return(0,K.Z)((0,K.Z)({},n),{},{label:n.title})}))));return(0,_.jsxs)(Q,{onSubmit:function(n){n.preventDefault();var a={startDate:t,endDate:i,books:e.map((function(n){return n._id}))};o((0,W.fF)(a)),l(!0)},children:[(0,_.jsx)("h2",{children:"My training"}),(0,_.jsxs)("div",{className:"date-input-container",children:[(0,_.jsx)(R._,{dateAdapter:q.y,children:(0,_.jsx)(I.M,{label:"Start",defaultValue:Z()(Z()().format("YYYY-MM-DD")),onChange:function(n){n&&r(n.format("YYYY-MM-DD"))},disabled:!0})}),(0,_.jsx)(R._,{dateAdapter:q.y,children:(0,_.jsx)(I.M,{label:"Finish",onChange:function(n){n&&s(n.format("YYYY-MM-DD"))},disablePast:!0,minDate:Z()().add(1,"day")})})]}),(0,_.jsxs)("div",{className:"books-input-container",children:[(0,_.jsx)(en.Z,{onChange:function(n,e){e&&h(e)},value:u,disablePortal:!0,isOptionEqualToValue:function(n,e){return n._id===e._id},id:"combo-box-demo",options:b,sx:{width:300},renderInput:function(n){return(0,_.jsx)(z.Z,(0,K.Z)((0,K.Z)({},n),{},{label:"Choose books from the library "}))}}),(0,_.jsx)("button",{type:"button",onClick:function(){u&&(!function(n){if(n&&!e.find((function(e){return e._id===n._id}))){var t=n.title,i=n.author,r=n.publishYear,s=n.pagesTotal,l=n._id,o=n.pagesFinished;a([].concat((0,P.Z)(e),[{title:t,author:i,publishYear:r,pagesTotal:s,_id:l,pagesFinished:o}]))}}(u),h(null))},children:"Add"}),(0,_.jsx)("button",{type:"submit",children:"Start training"})]}),(0,_.jsx)(nn,{trainingList:e,removeFromTrainingListHandler:function(n){a(e.filter((function(e){return e._id!==n})))}})]})},rn=b.Z.div(u||(u=(0,p.Z)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: min(280px, 100%);\n  background: #fff;\n  box-shadow: 10px 10px 20px 0px rgba(9, 30, 63, 0.2);\n  padding: 44px;\n\n  @media screen and (min-width: 768px) {\n    width: min(394px, 100%);\n    padding: 40px 29px 48px;\n  }\n\n  svg {\n    fill: #a6abb9;\n    margin: 0 auto;\n    display: block;\n    margin-bottom: 14px;\n  }\n\n  &.success,\n  &.book-read {\n    svg {\n      fill: #ff6b08;\n    }\n  }\n  p {\n    font-size: 16px;\n    font-style: normal;\n    font-weight: 500;\n    line-height: 22px;\n    width: 130px;\n    margin: 0 auto;\n    margin-bottom: 14px;\n    text-align: center;\n    @media screen and (min-width: 768px) {\n      width: 289px;\n      margin-bottom: 25px;\n    }\n  }\n  .buttons-container {\n    display: flex;\n    flex-direction: column;\n    gap: 20px;\n    @media screen and (min-width: 768px) {\n      flex-direction: row;\n      justify-content: space-between;\n      margin: 0;\n    }\n  }\n  button {\n    cursor: pointer;\n    display: block;\n    margin: 0 auto;\n    padding: 11px;\n    min-width: 130px;\n    font-size: 14px;\n    font-style: normal;\n    font-weight: 500;\n    line-height: normal;\n    border: 1px solid #000;\n    background-color: white;\n    box-shadow: 0px 2px 4px 0px rgba(0, 0, 0, 0.25);\n    @media screen and (min-width: 768px) {\n      min-width: 152px;\n    }\n  }\n  .button-accent {\n    color: white;\n    border: none;\n    background: #ff6b08;\n    box-shadow: 0px 2px 4px 0px rgba(0, 0, 0, 0.25);\n  }\n"]))),sn=t(4164),ln=t(7689),on=["title","titleId"];function dn(){return dn=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},dn.apply(this,arguments)}function cn(n,e){if(null==n)return{};var t,i,a=function(n,e){if(null==n)return{};var t,i,a={},r=Object.keys(n);for(i=0;i<r.length;i++)t=r[i],e.indexOf(t)>=0||(a[t]=n[t]);return a}(n,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);for(i=0;i<r.length;i++)t=r[i],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(a[t]=n[t])}return a}function un(n,e){var t=n.title,i=n.titleId,a=cn(n,on);return j.createElement("svg",dn({width:54,height:54,viewBox:"0 0 54 54",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":i},a),t?j.createElement("title",{id:i},t):null,h||(h=j.createElement("g",{id:"thumb_up-24px 1",clipPath:"url(#clip0_4306_6660)"},j.createElement("path",{id:"Vector",d:"M20.25 47.25H40.5C42.3675 47.25 43.965 46.125 44.64 44.505L51.435 28.6425C51.6375 28.125 51.75 27.585 51.75 27V22.5C51.75 20.025 49.725 18 47.25 18H33.0525L35.19 7.7175L35.2575 6.9975C35.2575 6.075 34.875 5.22 34.2675 4.6125L31.8825 2.25L17.055 17.0775C16.245 17.8875 15.75 19.0125 15.75 20.25V42.75C15.75 45.225 17.775 47.25 20.25 47.25ZM20.25 20.25L30.015 10.485L27 22.5H47.25V27L40.5 42.75H20.25V20.25ZM2.25 20.25H11.25V47.25H2.25V20.25Z"}))),f||(f=j.createElement("defs",null,j.createElement("clipPath",{id:"clip0_4306_6660"},j.createElement("rect",{width:54,height:54})))))}var hn=j.forwardRef(un),fn=(t.p,document.querySelector("#modal-root")),xn=function(n){var e=n.modalType,t=n.modalCloseHandler,i=n.resetTrainingRegistrationData,a=(0,ln.s0)(),r=(0,N.T)();switch(e){case"success":return(0,_.jsxs)(rn,{className:"success",children:[(0,_.jsx)(hn,{}),(0,_.jsx)("p",{children:"Congratulations! You made it in time!"}),(0,_.jsxs)("div",{className:"buttons-container",children:[(0,_.jsx)("button",{type:"button",onClick:function(){t(),i(),r((0,T.rF)())},className:"button-accent",children:"New training"}),(0,_.jsx)("button",{type:"button",onClick:function(){t(),a("/"),r((0,T.rF)())},children:"Back"})]})]});case"fail":return(0,sn.createPortal)((0,_.jsxs)(rn,{className:"fail",children:[(0,_.jsx)(hn,{}),(0,_.jsx)("p",{children:"Well done! but you need to be a little bit faster. You can do it)"}),(0,_.jsxs)("div",{className:"buttons-container",children:[(0,_.jsx)("button",{type:"button",onClick:function(){t(),i(),r((0,T.rF)())},className:"button-accent",children:"New training"}),(0,_.jsx)("button",{type:"button",onClick:function(){t(),a("/"),r((0,T.rF)())},children:"Back"})]})]}),fn);case"book read":return(0,_.jsxs)(rn,{className:"book-read",children:[(0,_.jsx)(hn,{}),(0,_.jsx)("p",{children:"Congratulations! Another book read."}),(0,_.jsx)("button",{type:"button",onClick:function(){t()},className:"button-accent",children:"Done"})]})}},pn=t(1414),bn=t(3329),gn=function(){var n=(0,N.C)(T.$3),e=(0,N.C)(T.o3),t=(0,N.C)(T.nL),i=(0,N.C)(T.Yz),a=(0,N.C)(T.UN),r=(0,N.C)(T.d9),s=(0,N.C)(tn.bH),l=[],o=function(){return Z()().format("YYYY-MM-DD")},d=(0,j.useState)(l),c=(0,x.Z)(d,2),u=c[0],h=c[1],f=(0,j.useState)(o()),p=(0,x.Z)(f,2),b=p[0],m=p[1],v=(0,j.useState)(""),k=(0,x.Z)(v,2),y=k[0],C=k[1],S=(0,j.useState)(!1),w=(0,x.Z)(S,2),D=w[0],Y=w[1],L=(0,j.useState)(""),E=(0,x.Z)(L,2),F=E[0],O=E[1],B=(0,j.useState)(!1),P=(0,x.Z)(B,2),V=P[0],I=P[1],R=(0,j.useState)(!1),q=(0,x.Z)(R,2),z=q[0],U=q[1],$=function(n){I(n)},J=function(){m(o()),C(""),h(l)},K=(0,N.T)();(0,j.useEffect)((function(){s&&K((0,W.uz)())}),[s]),(0,j.useEffect)((function(){switch(i){case"none":z||U(!0);break;case"active":z||U(!0),V&&K((0,tn.cJ)(a));break;case"success":O("success"),Y(!0);break;case"fail":O("fail"),Y(!0)}}),[i]),(0,j.useEffect)((function(){"active"===i&&r&&1!==r&&z&&(K((0,tn.Ai)(a[r-2])),O("book read"),Y(!0))}),[r]);var Q=function(n){h(n)},X=function(n){m(n)},nn=function(n){C(n)};return"fulfilled"===e&&console.log(Object.values((0,M.Ln)(Object.values(n))).map((function(n,e,t){return(338-(0,M.dD)(t,e))/(10-e)}))),(0,_.jsxs)(g,{children:["active"===i||"success"===i||"fail"===i?(0,_.jsx)(A,{}):"none"===i?(0,_.jsx)(an,{trainingBookList:u,startDate:b,endDate:y,updateTrainingBookList:Q,updateStartDate:X,updateEndDate:nn,updateIsFormSubmitted:$}):(0,_.jsx)("div",{children:"Loading..."}),(0,_.jsx)(H,{trainingBookList:u,planningStartDate:b,planningEndDate:y}),t&&(0,_.jsx)(G,{}),(0,_.jsx)(pn.Z,{open:D,onClose:function(){Y(!1),J(),K((0,T.rF)())},children:(0,_.jsx)(bn.Z,{children:(0,_.jsx)(xn,{modalType:F,modalCloseHandler:function(){Y(!1)},resetTrainingRegistrationData:J})})})]})}}}]);
//# sourceMappingURL=740.6f62fa25.chunk.js.map