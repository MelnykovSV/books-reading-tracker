"use strict";(self.webpackChunkbooks_reading_tracker=self.webpackChunkbooks_reading_tracker||[]).push([[259],{8259:function(e,n,t){t.r(n),t.d(n,{default:function(){return le}});var i,a,s,r,l,o,d,c,u,h=t(9439),f=t(168),x=t(225),j=x.Z.div(i||(i=(0,f.Z)([""]))),p=t(2791),g=t(7892),b=t.n(g),Z=x.Z.div(a||(a=(0,f.Z)([""]))),m=x.Z.div(s||(s=(0,f.Z)([""]))),v=t(9836),k=t(3382),C=t(3994),S=t(9281),y=t(6890),D=t(5855),Y=t(5527),T=t(3153),_=t(3384),F=t(184),L=function(){var e=(0,T.C)(_.UN);return(0,F.jsx)(m,{children:(0,F.jsx)(S.Z,{component:Y.Z,children:(0,F.jsxs)(v.Z,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,F.jsx)(y.Z,{children:(0,F.jsxs)(D.Z,{children:[(0,F.jsx)(C.Z,{align:"left",children:"Book title"}),(0,F.jsx)(C.Z,{align:"left",children:"Author"}),(0,F.jsx)(C.Z,{align:"left",children:"Year"}),(0,F.jsx)(C.Z,{align:"left",children:"Pages"})]})}),(0,F.jsx)(k.Z,{children:e.map((function(e){return(0,F.jsxs)(D.Z,{sx:{"&:last-of-type td, &:last-of-type th":{border:0}},children:[(0,F.jsxs)(C.Z,{align:"left",children:[e.pagesTotal===e.pagesFinished?"true":"false","' '",e.title]}),(0,F.jsx)(C.Z,{align:"left",children:e.author}),(0,F.jsx)(C.Z,{align:"left",children:e.publishYear}),(0,F.jsx)(C.Z,{align:"left",children:e.pagesTotal})]},e._id)}))})]})})})},N=x.Z.div(r||(r=(0,f.Z)([""]))),M=t(1474),A=function(){var e=(0,T.T)(),n=(0,T.C)(_.v3),t=(0,p.useState)(b()(n).diff(b()())),i=(0,h.Z)(t,2),a=i[0],s=i[1];return(0,p.useEffect)((function(){var t=setInterval((function(){b()(n).diff(b()())>=0?s(b()(n).diff(b()())):(s(0),e((0,_.lF)("fail")),clearInterval(t))}),1e3);return function(){clearInterval(t)}}),[]),(0,F.jsx)(N,{children:(0,F.jsxs)("dl",{children:[(0,F.jsxs)("div",{children:[(0,F.jsx)("dt",{children:(0,M.lN)(a).d.toString().padStart(2,"0")}),(0,F.jsx)("dd",{children:"Days"})]}),(0,F.jsxs)("div",{children:[(0,F.jsx)("dt",{children:(0,M.lN)(a).h.toString().padStart(2,"0")}),(0,F.jsx)("dd",{children:"Hrs"})]}),(0,F.jsxs)("div",{children:[(0,F.jsx)("dt",{children:(0,M.lN)(a).m.toString().padStart(2,"0")}),(0,F.jsx)("dd",{children:"Minutes"})]}),(0,F.jsxs)("div",{children:[(0,F.jsx)("dt",{children:(0,M.lN)(a).s.toString().padStart(2,"0")}),(0,F.jsx)("dd",{children:"Seconds"})]})]})})},B=function(){return(0,F.jsxs)(Z,{children:[(0,F.jsx)(A,{}),(0,F.jsx)(L,{})]})},E=x.Z.div(l||(l=(0,f.Z)([""]))),P=function(e){var n=e.trainingBookList,t=e.planningStartDate,i=e.planningEndDate,a=(0,T.C)(_.SL),s=(0,T.C)(_.Nh),r=(0,T.C)(_.v3),l=(0,T.C)(_.nL);return(0,F.jsxs)(E,{children:[(0,F.jsx)("h2",{children:"My goals"}),(0,F.jsxs)("ul",{className:"goals-body",children:[(0,F.jsxs)("li",{className:"goal",children:[(0,F.jsx)("p",{children:l?a.books.length:n.length}),(0,F.jsx)("p",{children:"Amount of books"})]}),(0,F.jsxs)("li",{className:"goal",children:[(0,F.jsx)("p",{children:l?b()(r).diff(b()(s),"day"):b()(i).diff(t,"day")||0}),(0,F.jsx)("p",{children:"Amount of days"})]}),l&&(0,F.jsxs)("li",{className:"goal",children:[(0,F.jsx)("p",{children:a.books.length-(0,M.ss)(a.books)+1}),(0,F.jsx)("p",{children:"Books left"})]})]})]})},w=t(3433),H=x.Z.div(o||(o=(0,f.Z)([""]))),I=t(5854),q=t(1652),O=t(4750),R=t(5853),U=t(5984),V=t(4653),W=t(5705),z=t(6727),$=function(){var e=(0,T.C)(_.SL),n=(0,T.C)(_.o3),t=(0,T.C)(_.$3),i=(0,T.T)(),a=(0,p.useState)(0),s=(0,h.Z)(a,2),r=s[0],l=s[1],o=(0,M.pd)(e.books);(0,p.useEffect)((function(){"fulfilled"===n&&(o?l(o.pagesTotal-o.pagesFinished):(l(0),i((0,_.lF)("success"))))}),[o,n]);var d=z.Ry({pages:z.Rx().min(1,"Please enter a valid value").max(r,"You have only ".concat(r," pages left in this book")).required("This field is required")}),c=(0,W.TA)({initialValues:{pages:0},validationSchema:d,onSubmit:function(e){i((0,V.UU)(e)),c.resetForm()}}),u=function(e){var n=(0,w.Z)(Object.values(e));return n.length<=5?n:n.filter((function(e,n,t){return n+1>t.length-5}))}(t);return(0,F.jsxs)(H,{children:[(0,F.jsxs)("form",{onSubmit:c.handleSubmit,children:[(0,F.jsx)(q._,{dateAdapter:O.y,children:(0,F.jsx)(I.M,{label:"Date",defaultValue:b()(),disabled:!0})}),(0,F.jsx)(R.Z,{id:"outlined-basic",label:"Amount of pages",variant:"outlined",type:"number",name:"pages",value:c.values.pages,onChange:c.handleChange,helperText:c.touched.pages&&c.errors.pages}),(0,F.jsx)("button",{type:"submit",children:"Add result"})]}),(0,F.jsxs)("div",{className:"results-container",children:[(0,F.jsx)("h3",{children:"Statistics"}),"fulfilled"===n?u.map((function(e){return(0,F.jsxs)("li",{children:[(0,F.jsx)("p",{children:e.time}),(0,F.jsx)("p",{children:e.pagesCount})]},(0,U.x0)())})):null]})]})},J=t(1413),G=x.Z.form(d||(d=(0,f.Z)([""]))),K=x.Z.div(c||(c=(0,f.Z)([""]))),Q=function(e){var n=e.trainingList,t=e.removeFromTrainingListHandler;return(0,F.jsx)(K,{children:(0,F.jsx)(S.Z,{component:Y.Z,children:(0,F.jsxs)(v.Z,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,F.jsx)(y.Z,{children:(0,F.jsxs)(D.Z,{children:[(0,F.jsx)(C.Z,{align:"left",children:"Book title"}),(0,F.jsx)(C.Z,{align:"left",children:"Author"}),(0,F.jsx)(C.Z,{align:"left",children:"Year"}),(0,F.jsx)(C.Z,{align:"left",children:"Pages"})]})}),(0,F.jsx)(k.Z,{children:n.map((function(e){return(0,F.jsxs)(D.Z,{sx:{"&:last-of-type td, &:last-of-type th":{border:0}},children:[(0,F.jsx)(C.Z,{align:"left",children:e.title}),(0,F.jsx)(C.Z,{align:"left",children:e.author}),(0,F.jsx)(C.Z,{align:"left",children:e.publishYear}),(0,F.jsx)(C.Z,{align:"left",children:e.pagesTotal}),(0,F.jsx)(C.Z,{align:"left",children:(0,F.jsx)("button",{type:"button",onClick:function(){t(e._id)},children:"D"})})]},e._id)}))})]})})})},X=t(5770),ee=t(4452),ne=function(e){var n=e.trainingBookList,t=e.startDate,i=e.endDate,a=e.updateTrainingBookList,s=e.updateStartDate,r=e.updateEndDate,l=e.updateIsFormSubmitted,o=(0,T.T)(),d=(0,p.useState)(null),c=(0,h.Z)(d,2),u=c[0],f=c[1],x=(0,T.C)(ee.r9),j=(0,T.C)(ee.k3),g=[].concat((0,w.Z)(x.map((function(e){return(0,J.Z)((0,J.Z)({},e),{},{label:e.title})}))),(0,w.Z)(j.map((function(e){return(0,J.Z)((0,J.Z)({},e),{},{label:e.title})}))));return(0,F.jsxs)(G,{onSubmit:function(e){e.preventDefault();var a={startDate:t,endDate:i,books:n.map((function(e){return e._id}))};o((0,V.fF)(a)),l(!0)},children:[(0,F.jsx)("h2",{children:"My training"}),(0,F.jsxs)("div",{className:"date-input-container",children:[(0,F.jsx)(q._,{dateAdapter:O.y,children:(0,F.jsx)(I.M,{label:"Start",defaultValue:b()(b()().format("YYYY-MM-DD")),onChange:function(e){e&&s(e.format("YYYY-MM-DD"))},disabled:!0})}),(0,F.jsx)(q._,{dateAdapter:O.y,children:(0,F.jsx)(I.M,{label:"Finish",onChange:function(e){e&&r(e.format("YYYY-MM-DD"))},disablePast:!0,minDate:b()().add(1,"day")})})]}),(0,F.jsxs)("div",{className:"books-input-container",children:[(0,F.jsx)(X.Z,{onChange:function(e,n){n&&f(n)},value:u,disablePortal:!0,isOptionEqualToValue:function(e,n){return e._id===n._id},id:"combo-box-demo",options:g,sx:{width:300},renderInput:function(e){return(0,F.jsx)(R.Z,(0,J.Z)((0,J.Z)({},e),{},{label:"Choose books from the library "}))}}),(0,F.jsx)("button",{type:"button",onClick:function(){u&&(!function(e){if(e&&!n.find((function(n){return n._id===e._id}))){var t=e.title,i=e.author,s=e.publishYear,r=e.pagesTotal,l=e._id,o=e.pagesFinished;a([].concat((0,w.Z)(n),[{title:t,author:i,publishYear:s,pagesTotal:r,_id:l,pagesFinished:o}]))}}(u),f(null))},children:"Add"}),(0,F.jsx)("button",{type:"submit",children:"Start training"})]}),(0,F.jsx)(Q,{trainingList:n,removeFromTrainingListHandler:function(e){a(n.filter((function(n){return n._id!==e})))}})]})},te=x.Z.div(u||(u=(0,f.Z)([""]))),ie=t(4164),ae=t(7689),se=document.querySelector("#modal-root"),re=function(e){var n=e.modalType,t=e.modalCloseHandler,i=e.resetTrainingRegistrationData,a=(0,ae.s0)(),s=(0,T.T)();switch(n){case"success":return(0,ie.createPortal)((0,F.jsxs)(te,{children:[(0,F.jsx)("p",{children:"Congratulations! You made it in time!"}),(0,F.jsx)("button",{type:"button",onClick:function(){t(),i(),s((0,_.rF)())},children:"New training"}),(0,F.jsx)("button",{type:"button",onClick:function(){t(),a("/"),s((0,_.rF)())},children:"Back"})]}),se);case"fail":return(0,ie.createPortal)((0,F.jsxs)(te,{children:[(0,F.jsx)("p",{children:"Well done! but you need to be a little bit faster. You can do it)"}),(0,F.jsx)("button",{type:"button",onClick:function(){t(),i(),s((0,_.rF)())},children:"New training"}),(0,F.jsx)("button",{type:"button",onClick:function(){t(),a("/"),s((0,_.rF)())},children:"Back"})]}),se);case"book read":return(0,ie.createPortal)((0,F.jsxs)(te,{children:[(0,F.jsx)("p",{children:"Congratulations! Another book read."}),(0,F.jsx)("button",{type:"button",onClick:function(){t()},children:"Done"})]}),se)}},le=function(){var e=(0,T.C)(_.$3),n=(0,T.C)(_.o3),t=(0,T.C)(_.nL),i=(0,T.C)(_.Yz),a=(0,T.C)(_.UN),s=(0,T.C)(_.d9),r=(0,T.C)(ee.bH),l=[],o=function(){return b()().format("YYYY-MM-DD")},d=(0,p.useState)(l),c=(0,h.Z)(d,2),u=c[0],f=c[1],x=(0,p.useState)(o()),g=(0,h.Z)(x,2),Z=g[0],m=g[1],v=(0,p.useState)(""),k=(0,h.Z)(v,2),C=k[0],S=k[1],y=(0,p.useState)(!1),D=(0,h.Z)(y,2),Y=D[0],L=D[1],N=(0,p.useState)(""),A=(0,h.Z)(N,2),E=A[0],w=A[1],H=(0,p.useState)(!1),I=(0,h.Z)(H,2),q=I[0],O=I[1],R=(0,p.useState)(!1),U=(0,h.Z)(R,2),W=U[0],z=U[1],J=function(e){O(e)},G=(0,T.T)();(0,p.useEffect)((function(){r&&G((0,V.uz)())}),[r]),(0,p.useEffect)((function(){switch(i){case"none":W||z(!0);break;case"active":W||z(!0),q&&G((0,ee.cJ)(a));break;case"success":w("success"),L(!0);break;case"fail":w("fail"),L(!0)}}),[i]),(0,p.useEffect)((function(){"active"===i&&s&&1!==s&&W&&(G((0,ee.Ai)(a[s-2])),w("book read"),L(!0))}),[s]);var K=function(e){f(e)},Q=function(e){m(e)},X=function(e){S(e)};return"fulfilled"===n&&console.log(Object.values((0,M.Ln)(Object.values(e))).map((function(e,n,t){return(338-(0,M.dD)(t,n))/(10-n)}))),(0,F.jsxs)(j,{children:["active"===i||"success"===i||"fail"===i?(0,F.jsx)(B,{}):"none"===i?(0,F.jsx)(ne,{trainingBookList:u,startDate:Z,endDate:C,updateTrainingBookList:K,updateStartDate:Q,updateEndDate:X,updateIsFormSubmitted:J}):(0,F.jsx)("div",{children:"Loading..."}),(0,F.jsx)(P,{trainingBookList:u,planningStartDate:Z,planningEndDate:C}),t&&(0,F.jsx)($,{}),Y&&(0,F.jsx)(re,{modalType:E,modalCloseHandler:function(){L(!1)},resetTrainingRegistrationData:function(){m(o()),S(""),f(l)}})]})}}}]);
//# sourceMappingURL=259.4530c20f.chunk.js.map