"use strict";(self.webpackChunkbooks_reading_tracker=self.webpackChunkbooks_reading_tracker||[]).push([[259],{8259:function(e,n,t){t.r(n),t.d(n,{default:function(){return re}});var i,l,s,a,r,o,d,c,u,h=t(9439),f=t(168),x=t(225),j=x.Z.div(i||(i=(0,f.Z)([""]))),g=t(2791),p=t(7892),b=t.n(p),Z=x.Z.div(l||(l=(0,f.Z)([""]))),m=x.Z.div(s||(s=(0,f.Z)([""]))),v=t(9836),k=t(3382),C=t(3994),S=t(9281),y=t(6890),D=t(5855),Y=t(5527),T=t(3153),_=t(3384),N=t(184),L=function(){var e=(0,T.C)(_.UN);return(0,N.jsx)(m,{children:(0,N.jsx)(S.Z,{component:Y.Z,children:(0,N.jsxs)(v.Z,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,N.jsx)(y.Z,{children:(0,N.jsxs)(D.Z,{children:[(0,N.jsx)(C.Z,{align:"left",children:"Book title"}),(0,N.jsx)(C.Z,{align:"left",children:"Author"}),(0,N.jsx)(C.Z,{align:"left",children:"Year"}),(0,N.jsx)(C.Z,{align:"left",children:"Pages"})]})}),(0,N.jsx)(k.Z,{children:e.map((function(e){return(0,N.jsxs)(D.Z,{sx:{"&:last-of-type td, &:last-of-type th":{border:0}},children:[(0,N.jsxs)(C.Z,{align:"left",children:[e.pagesTotal===e.pagesFinished?"true":"false","' '",e.title]}),(0,N.jsx)(C.Z,{align:"left",children:e.author}),(0,N.jsx)(C.Z,{align:"left",children:e.publishYear}),(0,N.jsx)(C.Z,{align:"left",children:e.pagesTotal})]},e._id)}))})]})})})},M=x.Z.div(a||(a=(0,f.Z)([""]))),A=t(1474),B=function(){var e=(0,T.T)(),n=(0,T.C)(_.v3),t=(0,g.useState)(b()(n).diff(b()())),i=(0,h.Z)(t,2),l=i[0],s=i[1];return(0,g.useEffect)((function(){var t=setInterval((function(){b()(n).diff(b()())>=0?s(b()(n).diff(b()())):(s(0),e((0,_.lF)("fail")),clearInterval(t))}),1e3);return function(){clearInterval(t)}}),[]),(0,N.jsx)(M,{children:(0,N.jsxs)("dl",{children:[(0,N.jsxs)("div",{children:[(0,N.jsx)("dt",{children:(0,A.lN)(l).d.toString().padStart(2,"0")}),(0,N.jsx)("dd",{children:"Days"})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("dt",{children:(0,A.lN)(l).h.toString().padStart(2,"0")}),(0,N.jsx)("dd",{children:"Hrs"})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("dt",{children:(0,A.lN)(l).m.toString().padStart(2,"0")}),(0,N.jsx)("dd",{children:"Minutes"})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("dt",{children:(0,A.lN)(l).s.toString().padStart(2,"0")}),(0,N.jsx)("dd",{children:"Seconds"})]})]})})},F=function(){return(0,N.jsxs)(Z,{children:[(0,N.jsx)(B,{}),(0,N.jsx)(L,{})]})},E=x.Z.div(r||(r=(0,f.Z)([""]))),P=function(e){var n=e.trainingBookList,t=e.planningStartDate,i=e.planningEndDate,l=(0,T.C)(_.SL);console.log(n);var s=(0,T.C)(_.Nh),a=(0,T.C)(_.v3),r=(0,T.C)(_.nL);return r&&(console.log("BOOKS COUNTER"),console.log((0,A.ss)(l.books))),(0,N.jsxs)(E,{children:[(0,N.jsx)("h2",{children:"My goals"}),(0,N.jsxs)("ul",{className:"goals-body",children:[(0,N.jsxs)("li",{className:"goal",children:[(0,N.jsx)("p",{children:r?l.books.length:n.length}),(0,N.jsx)("p",{children:"Amount of books"})]}),(0,N.jsxs)("li",{className:"goal",children:[(0,N.jsx)("p",{children:r?b()(a).diff(b()(s),"day"):b()(i).diff(t,"day")||0}),(0,N.jsx)("p",{children:"Amount of days"})]}),r&&(0,N.jsxs)("li",{className:"goal",children:[(0,N.jsx)("p",{children:l.books.length-(0,A.ss)(l.books)+1}),(0,N.jsx)("p",{children:"Books left"})]})]})]})},w=t(3433),O=x.Z.div(o||(o=(0,f.Z)([""]))),H=t(1754),U=t(1652),q=t(4750),I=t(5853),V=t(5984),R=t(4653),W=t(5705),z=t(6727),$=function(){var e=(0,T.C)(_.SL),n=(0,T.C)(_.o3),t=(0,T.C)(_.$3),i=(0,T.T)(),l=(0,g.useState)(0),s=(0,h.Z)(l,2),a=s[0],r=s[1],o=(0,A.pd)(e.books);(0,g.useEffect)((function(){"fulfilled"===n&&(o?r(o.pagesTotal-o.pagesFinished):(r(0),i((0,_.lF)("success"))))}),[o,n]);var d=z.Ry({pages:z.Rx().min(1,"Please enter a valid value").max(a,"You have only ".concat(a," pages left in this book")).required("This field is required")}),c=(0,W.TA)({initialValues:{pages:0},validationSchema:d,onSubmit:function(e){console.log(e),i((0,R.UU)(e)),c.resetForm()}}),u=function(e){var n=(0,w.Z)(Object.values(e));return n.length<=5?n:n.filter((function(e,n,t){return n+1>t.length-5}))}(t);return(0,N.jsxs)(O,{children:[(0,N.jsxs)("form",{onSubmit:c.handleSubmit,children:[(0,N.jsx)(U._,{dateAdapter:q.y,children:(0,N.jsx)(H.M,{label:"Date",defaultValue:b()(),disabled:!0})}),(0,N.jsx)(I.Z,{id:"outlined-basic",label:"Amount of pages",variant:"outlined",type:"number",name:"pages",value:c.values.pages,onChange:c.handleChange,helperText:c.touched.pages&&c.errors.pages}),(0,N.jsx)("button",{type:"submit",children:"Add result"})]}),(0,N.jsxs)("div",{className:"results-container",children:[(0,N.jsx)("h3",{children:"Statistics"}),"fulfilled"===n?u.map((function(e){return(0,N.jsxs)("li",{children:[(0,N.jsx)("p",{children:e.time}),(0,N.jsx)("p",{children:e.pagesCount})]},(0,V.x0)())})):null]})]})},K=t(1413),G=x.Z.form(d||(d=(0,f.Z)([""]))),J=x.Z.div(c||(c=(0,f.Z)([""]))),Q=function(e){var n=e.trainingList,t=e.removeFromTrainingListHandler;return(0,N.jsx)(J,{children:(0,N.jsx)(S.Z,{component:Y.Z,children:(0,N.jsxs)(v.Z,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,N.jsx)(y.Z,{children:(0,N.jsxs)(D.Z,{children:[(0,N.jsx)(C.Z,{align:"left",children:"Book title"}),(0,N.jsx)(C.Z,{align:"left",children:"Author"}),(0,N.jsx)(C.Z,{align:"left",children:"Year"}),(0,N.jsx)(C.Z,{align:"left",children:"Pages"})]})}),(0,N.jsx)(k.Z,{children:n.map((function(e){return(0,N.jsxs)(D.Z,{sx:{"&:last-of-type td, &:last-of-type th":{border:0}},children:[(0,N.jsx)(C.Z,{align:"left",children:e.title}),(0,N.jsx)(C.Z,{align:"left",children:e.author}),(0,N.jsx)(C.Z,{align:"left",children:e.publishYear}),(0,N.jsx)(C.Z,{align:"left",children:e.pagesTotal}),(0,N.jsx)(C.Z,{align:"left",children:(0,N.jsx)("button",{type:"button",onClick:function(){console.log(e),t(e._id)},children:"D"})})]},e._id)}))})]})})})},X=t(5770),ee=t(4452),ne=function(e){var n=e.trainingBookList,t=e.startDate,i=e.endDate,l=e.updateTrainingBookList,s=e.updateStartDate,a=e.updateEndDate,r=(0,T.C)(ee.M7);console.log(n);var o=(0,T.T)();(0,g.useEffect)((function(){r&&(o((0,R.uz)()),console.log("something"))}),[r]);var d=(0,g.useState)(null),c=(0,h.Z)(d,2),u=c[0],f=c[1],x=(0,T.C)(ee.r9),j=(0,T.C)(ee.k3),p=[].concat((0,w.Z)(x.map((function(e){return(0,K.Z)((0,K.Z)({},e),{},{label:e.title})}))),(0,w.Z)(j.map((function(e){return(0,K.Z)((0,K.Z)({},e),{},{label:e.title})}))));return(0,N.jsxs)(G,{onSubmit:function(e){e.preventDefault();var l={startDate:t,endDate:i,books:n.map((function(e){return e._id}))};o((0,R.fF)(l)),console.log(l)},children:[(0,N.jsx)("h2",{children:"My training"}),(0,N.jsxs)("div",{className:"date-input-container",children:[(0,N.jsx)(U._,{dateAdapter:q.y,children:(0,N.jsx)(H.M,{label:"Start",defaultValue:b()(b()().format("YYYY-MM-DD")),onChange:function(e){e&&s(e.format("YYYY-MM-DD"))},disabled:!0})}),(0,N.jsx)(U._,{dateAdapter:q.y,children:(0,N.jsx)(H.M,{label:"Finish",onChange:function(e){e&&a(e.format("YYYY-MM-DD"))},disablePast:!0,minDate:b()().add(1,"day")})})]}),(0,N.jsxs)("div",{className:"books-input-container",children:[(0,N.jsx)(X.Z,{onChange:function(e,n){n&&(console.log(n),f(n))},value:u,disablePortal:!0,isOptionEqualToValue:function(e,n){return e._id===n._id},id:"combo-box-demo",options:p,sx:{width:300},renderInput:function(e){return(0,N.jsx)(I.Z,(0,K.Z)((0,K.Z)({},e),{},{label:"Choose books from the library "}))}}),(0,N.jsx)("button",{type:"button",onClick:function(){u&&(!function(e){if(console.log("addToTrainingBookListHandler"),e&&!n.find((function(n){return n._id===e._id}))){var t=e.title,i=e.author,s=e.publishYear,a=e.pagesTotal,r=e._id,o=e.pagesFinished;l([].concat((0,w.Z)(n),[{title:t,author:i,publishYear:s,pagesTotal:a,_id:r,pagesFinished:o}]))}}(u),f(null))},children:"Add"}),(0,N.jsx)("button",{type:"submit",children:"Start training"})]}),(0,N.jsx)(Q,{trainingList:n,removeFromTrainingListHandler:function(e){l(n.filter((function(n){return n._id!==e})))}})]})},te=x.Z.div(u||(u=(0,f.Z)([""]))),ie=t(4164),le=t(7689),se=document.querySelector("#modal-root"),ae=function(e){var n=e.modalType,t=e.modalCloseHandler,i=(0,le.s0)(),l=(0,T.T)();switch(n){case"success":return(0,ie.createPortal)((0,N.jsxs)(te,{children:[(0,N.jsx)("p",{children:"Congratulations! You made it in time!"}),(0,N.jsx)("button",{type:"button",onClick:function(){t(),l((0,_.rF)())},children:"New training"}),(0,N.jsx)("button",{type:"button",onClick:function(){t(),i("/")},children:"Back"})]}),se);case"fail":return(0,ie.createPortal)((0,N.jsxs)(te,{children:[(0,N.jsx)("p",{children:"Well done! but you need to be a little bit faster. You can do it)"}),(0,N.jsx)("button",{type:"button",onClick:function(){t(),l((0,_.rF)())},children:"New training"}),(0,N.jsx)("button",{type:"button",onClick:function(){t(),i("/")},children:"Back"})]}),se);case"book read":return(0,ie.createPortal)((0,N.jsxs)(te,{children:[(0,N.jsx)("p",{children:"Congratulations! Another book read."}),(0,N.jsx)("button",{type:"button",onClick:function(){t()},children:"Done"})]}),se)}},re=function(){var e=(0,T.C)(_.$3),n=(0,T.C)(_.o3),t=(0,T.C)(_.nL),i=(0,T.C)(_.Yz),l=(0,T.C)(_.UN),s=(0,g.useState)([]),a=(0,h.Z)(s,2),r=a[0],o=a[1],d=(0,g.useState)(b()().format("YYYY-MM-DD")),c=(0,h.Z)(d,2),u=c[0],f=c[1],x=(0,g.useState)(""),p=(0,h.Z)(x,2),Z=p[0],m=p[1],v=(0,g.useState)(!1),k=(0,h.Z)(v,2),C=k[0],S=k[1],y=(0,g.useState)(""),D=(0,h.Z)(y,2),Y=D[0],L=D[1];console.log("planningStatus"),console.log(i),(0,g.useEffect)((function(){switch(i){case"none":case"active":break;case"success":L("success"),S(!0);break;case"fail":L("fail"),S(!0)}}),[i]),(0,g.useEffect)((function(){if("active"===i){var e=(0,A.ss)(l);if(!e||1===e)return;L("book read"),S(!0)}}),[l]);return console.log("STATS!"),"fulfilled"===n&&console.log(Object.values((0,A.Ln)(Object.values(e))).map((function(e,n,t){return(338-(0,A.dD)(t,n))/(10-n)}))),(0,N.jsxs)(j,{children:["active"===i||"success"===i||"fail"===i?(0,N.jsx)(F,{}):(0,N.jsx)(ne,{trainingBookList:r,startDate:u,endDate:Z,updateTrainingBookList:function(e){o(e)},updateStartDate:function(e){f(e)},updateEndDate:function(e){m(e)}}),(0,N.jsx)(P,{trainingBookList:r,planningStartDate:u,planningEndDate:Z}),t&&(0,N.jsx)($,{}),C&&(0,N.jsx)(ae,{modalType:Y,modalCloseHandler:function(){S(!1)}})]})}}}]);
//# sourceMappingURL=259.5feb1b8b.chunk.js.map