"use strict";(self.webpackChunkbooks_reading_tracker=self.webpackChunkbooks_reading_tracker||[]).push([[259],{8259:function(e,n,t){t.r(n),t.d(n,{default:function(){return re}});var i,l,s,a,r,o,d,c,u,h=t(9439),f=t(168),x=t(225),j=x.Z.div(i||(i=(0,f.Z)([""]))),g=t(2791),p=t(7892),b=t.n(p),Z=x.Z.div(l||(l=(0,f.Z)([""]))),m=x.Z.div(s||(s=(0,f.Z)([""]))),v=t(9836),k=t(3382),C=t(3994),S=t(9281),y=t(6890),D=t(5855),T=t(5527),Y=t(3153),_=t(3384),L=t(184),N=function(){var e=(0,Y.C)(_.UN);return(0,L.jsx)(m,{children:(0,L.jsx)(S.Z,{component:T.Z,children:(0,L.jsxs)(v.Z,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,L.jsx)(y.Z,{children:(0,L.jsxs)(D.Z,{children:[(0,L.jsx)(C.Z,{align:"left",children:"Book title"}),(0,L.jsx)(C.Z,{align:"left",children:"Author"}),(0,L.jsx)(C.Z,{align:"left",children:"Year"}),(0,L.jsx)(C.Z,{align:"left",children:"Pages"})]})}),(0,L.jsx)(k.Z,{children:e.map((function(e){return(0,L.jsxs)(D.Z,{sx:{"&:last-of-type td, &:last-of-type th":{border:0}},children:[(0,L.jsxs)(C.Z,{align:"left",children:[e.pagesTotal===e.pagesFinished?"true":"false","' '",e.title]}),(0,L.jsx)(C.Z,{align:"left",children:e.author}),(0,L.jsx)(C.Z,{align:"left",children:e.publishYear}),(0,L.jsx)(C.Z,{align:"left",children:e.pagesTotal})]},e._id)}))})]})})})},M=x.Z.div(a||(a=(0,f.Z)([""]))),A=t(1474),B=function(){var e=(0,Y.T)(),n=(0,Y.C)(_.v3),t=(0,g.useState)(b()(n).diff(b()())),i=(0,h.Z)(t,2),l=i[0],s=i[1];return(0,g.useEffect)((function(){var t=setInterval((function(){b()(n).diff(b()())>=0?s(b()(n).diff(b()())):(s(0),e((0,_.lF)("fail")),clearInterval(t))}),1e3);return function(){clearInterval(t)}}),[]),(0,L.jsx)(M,{children:(0,L.jsxs)("dl",{children:[(0,L.jsxs)("div",{children:[(0,L.jsx)("dt",{children:(0,A.lN)(l).d.toString().padStart(2,"0")}),(0,L.jsx)("dd",{children:"Days"})]}),(0,L.jsxs)("div",{children:[(0,L.jsx)("dt",{children:(0,A.lN)(l).h.toString().padStart(2,"0")}),(0,L.jsx)("dd",{children:"Hrs"})]}),(0,L.jsxs)("div",{children:[(0,L.jsx)("dt",{children:(0,A.lN)(l).m.toString().padStart(2,"0")}),(0,L.jsx)("dd",{children:"Minutes"})]}),(0,L.jsxs)("div",{children:[(0,L.jsx)("dt",{children:(0,A.lN)(l).s.toString().padStart(2,"0")}),(0,L.jsx)("dd",{children:"Seconds"})]})]})})},F=function(){return(0,L.jsxs)(Z,{children:[(0,L.jsx)(B,{}),(0,L.jsx)(N,{})]})},E=x.Z.div(r||(r=(0,f.Z)([""]))),P=function(e){var n=e.trainingBookList,t=e.planningStartDate,i=e.planningEndDate,l=(0,Y.C)(_.SL);console.log(n);var s=(0,Y.C)(_.Nh),a=(0,Y.C)(_.v3),r=(0,Y.C)(_.nL);return r&&(console.log("BOOKS COUNTER"),console.log((0,A.ss)(l.books))),(0,L.jsxs)(E,{children:[(0,L.jsx)("h2",{children:"My goals"}),(0,L.jsxs)("ul",{className:"goals-body",children:[(0,L.jsxs)("li",{className:"goal",children:[(0,L.jsx)("p",{children:r?l.books.length:n.length}),(0,L.jsx)("p",{children:"Amount of books"})]}),(0,L.jsxs)("li",{className:"goal",children:[(0,L.jsx)("p",{children:r?b()(a).diff(b()(s),"day"):b()(i).diff(t,"day")||0}),(0,L.jsx)("p",{children:"Amount of days"})]}),r&&(0,L.jsxs)("li",{className:"goal",children:[(0,L.jsx)("p",{children:l.books.length-(0,A.ss)(l.books)+1}),(0,L.jsx)("p",{children:"Books left"})]})]})]})},w=t(3433),O=x.Z.div(o||(o=(0,f.Z)([""]))),H=t(1754),U=t(1652),q=t(4750),I=t(5853),V=t(5984),R=t(4653),W=t(5705),z=t(6727),$=function(){var e=(0,Y.C)(_.SL),n=(0,Y.C)(_.o3),t=(0,Y.C)(_.$3),i=(0,Y.T)(),l=(0,g.useState)(0),s=(0,h.Z)(l,2),a=s[0],r=s[1],o=(0,A.pd)(e.books);(0,g.useEffect)((function(){"fulfilled"===n&&(o?r(o.pagesTotal-o.pagesFinished):(r(0),i((0,_.lF)("success"))))}),[o,n]);var d=z.Ry({pages:z.Rx().min(1,"Please enter a valid value").max(a,"You have only ".concat(a," pages left in this book")).required("This field is required")}),c=(0,W.TA)({initialValues:{pages:0},validationSchema:d,onSubmit:function(e){console.log(e),i((0,R.UU)(e)),c.resetForm()}}),u=function(e){var n=(0,w.Z)(Object.values(e));return n.length<=5?n:n.filter((function(e,n,t){return n+1>t.length-5}))}(t);return(0,L.jsxs)(O,{children:[(0,L.jsxs)("form",{onSubmit:c.handleSubmit,children:[(0,L.jsx)(U._,{dateAdapter:q.y,children:(0,L.jsx)(H.M,{label:"Date",defaultValue:b()(),disabled:!0})}),(0,L.jsx)(I.Z,{id:"outlined-basic",label:"Amount of pages",variant:"outlined",type:"number",name:"pages",value:c.values.pages,onChange:c.handleChange,helperText:c.touched.pages&&c.errors.pages}),(0,L.jsx)("button",{type:"submit",children:"Add result"})]}),(0,L.jsxs)("div",{className:"results-container",children:[(0,L.jsx)("h3",{children:"Statistics"}),"fulfilled"===n?u.map((function(e){return(0,L.jsxs)("li",{children:[(0,L.jsx)("p",{children:e.time}),(0,L.jsx)("p",{children:e.pagesCount})]},(0,V.x0)())})):null]})]})},K=t(1413),G=x.Z.form(d||(d=(0,f.Z)([""]))),J=x.Z.div(c||(c=(0,f.Z)([""]))),Q=function(e){var n=e.trainingList,t=e.removeFromTrainingListHandler;return(0,L.jsx)(J,{children:(0,L.jsx)(S.Z,{component:T.Z,children:(0,L.jsxs)(v.Z,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,L.jsx)(y.Z,{children:(0,L.jsxs)(D.Z,{children:[(0,L.jsx)(C.Z,{align:"left",children:"Book title"}),(0,L.jsx)(C.Z,{align:"left",children:"Author"}),(0,L.jsx)(C.Z,{align:"left",children:"Year"}),(0,L.jsx)(C.Z,{align:"left",children:"Pages"})]})}),(0,L.jsx)(k.Z,{children:n.map((function(e){return(0,L.jsxs)(D.Z,{sx:{"&:last-of-type td, &:last-of-type th":{border:0}},children:[(0,L.jsx)(C.Z,{align:"left",children:e.title}),(0,L.jsx)(C.Z,{align:"left",children:e.author}),(0,L.jsx)(C.Z,{align:"left",children:e.publishYear}),(0,L.jsx)(C.Z,{align:"left",children:e.pagesTotal}),(0,L.jsx)(C.Z,{align:"left",children:(0,L.jsx)("button",{type:"button",onClick:function(){console.log(e),t(e._id)},children:"D"})})]},e._id)}))})]})})})},X=t(5770),ee=t(4452),ne=function(e){var n=e.trainingBookList,t=e.startDate,i=e.endDate,l=e.updateTrainingBookList,s=e.updateStartDate,a=e.updateEndDate;console.log(n);var r=(0,Y.T)(),o=(0,g.useState)(null),d=(0,h.Z)(o,2),c=d[0],u=d[1],f=(0,Y.C)(ee.r9),x=(0,Y.C)(ee.k3),j=[].concat((0,w.Z)(f.map((function(e){return(0,K.Z)((0,K.Z)({},e),{},{label:e.title})}))),(0,w.Z)(x.map((function(e){return(0,K.Z)((0,K.Z)({},e),{},{label:e.title})}))));return(0,L.jsxs)(G,{onSubmit:function(e){e.preventDefault();var l={startDate:t,endDate:i,books:n.map((function(e){return e._id}))};r((0,R.fF)(l)),console.log(l)},children:[(0,L.jsx)("h2",{children:"My training"}),(0,L.jsxs)("div",{className:"date-input-container",children:[(0,L.jsx)(U._,{dateAdapter:q.y,children:(0,L.jsx)(H.M,{label:"Start",defaultValue:b()(b()().format("YYYY-MM-DD")),onChange:function(e){e&&s(e.format("YYYY-MM-DD"))},disabled:!0})}),(0,L.jsx)(U._,{dateAdapter:q.y,children:(0,L.jsx)(H.M,{label:"Finish",onChange:function(e){e&&a(e.format("YYYY-MM-DD"))},disablePast:!0,minDate:b()().add(1,"day")})})]}),(0,L.jsxs)("div",{className:"books-input-container",children:[(0,L.jsx)(X.Z,{onChange:function(e,n){n&&(console.log(n),u(n))},value:c,disablePortal:!0,isOptionEqualToValue:function(e,n){return e._id===n._id},id:"combo-box-demo",options:j,sx:{width:300},renderInput:function(e){return(0,L.jsx)(I.Z,(0,K.Z)((0,K.Z)({},e),{},{label:"Choose books from the library "}))}}),(0,L.jsx)("button",{type:"button",onClick:function(){c&&(!function(e){if(console.log("addToTrainingBookListHandler"),e&&!n.find((function(n){return n._id===e._id}))){var t=e.title,i=e.author,s=e.publishYear,a=e.pagesTotal,r=e._id,o=e.pagesFinished;l([].concat((0,w.Z)(n),[{title:t,author:i,publishYear:s,pagesTotal:a,_id:r,pagesFinished:o}]))}}(c),u(null))},children:"Add"}),(0,L.jsx)("button",{type:"submit",children:"Start training"})]}),(0,L.jsx)(Q,{trainingList:n,removeFromTrainingListHandler:function(e){l(n.filter((function(n){return n._id!==e})))}})]})},te=x.Z.div(u||(u=(0,f.Z)([""]))),ie=t(4164),le=t(7689),se=document.querySelector("#modal-root"),ae=function(e){var n=e.modalType,t=e.modalCloseHandler,i=(0,le.s0)(),l=(0,Y.T)();switch(n){case"success":return(0,ie.createPortal)((0,L.jsxs)(te,{children:[(0,L.jsx)("p",{children:"Congratulations! You made it in time!"}),(0,L.jsx)("button",{type:"button",onClick:function(){t(),l((0,_.rF)())},children:"New training"}),(0,L.jsx)("button",{type:"button",onClick:function(){t(),i("/")},children:"Back"})]}),se);case"fail":return(0,ie.createPortal)((0,L.jsxs)(te,{children:[(0,L.jsx)("p",{children:"Well done! but you need to be a little bit faster. You can do it)"}),(0,L.jsx)("button",{type:"button",onClick:function(){t(),l((0,_.rF)())},children:"New training"}),(0,L.jsx)("button",{type:"button",onClick:function(){t(),i("/")},children:"Back"})]}),se);case"book read":return(0,ie.createPortal)((0,L.jsxs)(te,{children:[(0,L.jsx)("p",{children:"Congratulations! Another book read."}),(0,L.jsx)("button",{type:"button",onClick:function(){t()},children:"Done"})]}),se)}},re=function(){var e=(0,Y.C)(_.$3),n=(0,Y.C)(_.o3),t=(0,Y.C)(_.nL),i=(0,Y.C)(_.Yz),l=(0,Y.C)(_.UN),s=(0,Y.C)(ee.M7),a=(0,g.useState)([]),r=(0,h.Z)(a,2),o=r[0],d=r[1],c=(0,g.useState)(b()().format("YYYY-MM-DD")),u=(0,h.Z)(c,2),f=u[0],x=u[1],p=(0,g.useState)(""),Z=(0,h.Z)(p,2),m=Z[0],v=Z[1],k=(0,g.useState)(!1),C=(0,h.Z)(k,2),S=C[0],y=C[1],D=(0,g.useState)(""),T=(0,h.Z)(D,2),N=T[0],M=T[1];console.log("planningStatus"),console.log(i);var B=(0,Y.T)();(0,g.useEffect)((function(){s&&(B((0,R.uz)()),console.log("something"))}),[s]),(0,g.useEffect)((function(){switch(i){case"none":case"active":break;case"success":M("success"),y(!0);break;case"fail":M("fail"),y(!0)}}),[i]),(0,g.useEffect)((function(){if("active"===i){var e=(0,A.ss)(l);if(!e||1===e)return;M("book read"),y(!0)}}),[l]);var E=function(e){d(e)},w=function(e){x(e)},O=function(e){v(e)};return console.log("STATS!"),"fulfilled"===n&&console.log(Object.values((0,A.Ln)(Object.values(e))).map((function(e,n,t){return(338-(0,A.dD)(t,n))/(10-n)}))),(0,L.jsxs)(j,{children:["active"===i||"success"===i||"fail"===i?(0,L.jsx)(F,{}):"none"===i?(0,L.jsx)(ne,{trainingBookList:o,startDate:f,endDate:m,updateTrainingBookList:E,updateStartDate:w,updateEndDate:O}):(0,L.jsx)("div",{children:"Loading..."}),(0,L.jsx)(P,{trainingBookList:o,planningStartDate:f,planningEndDate:m}),t&&(0,L.jsx)($,{}),S&&(0,L.jsx)(ae,{modalType:N,modalCloseHandler:function(){y(!1)}})]})}}}]);
//# sourceMappingURL=259.9f1ce42e.chunk.js.map